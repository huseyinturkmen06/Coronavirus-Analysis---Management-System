{% extends "layout.html" %}


{% block body %}


<h3 style= "text-align: center;">En Çok Görülen 3 Hastalık Türü</h3><br>


<form action="/veri/17" method="POST">

{% if data %}

<table class="w3-table-all">
    <thead>
      <tr class="w3-green">
        <th scope="col">Hastalık Adı</th>
        <th scope="col">Toplam Hastalığa Yakalanma Sayısı</th>
      </tr>
    </thead>
    <tbody>
    
      <tr>
        <td>{{data[0].hastalik_adi}}</td>
        <td>{{data[0].hastaliklar}}</td>
      </tr>

      <tr>
        <td>{{data[1].hastalik_adi}}</td>
        <td>{{data[1].hastaliklar}}</td>
      </tr>

      <tr>
        <td>{{data[2].hastalik_adi}}</td>
        <td>{{data[2].hastaliklar}}</td>
      </tr>
      </tbody> 
</table><br>

<br><br><br>




<h3 style= "text-align: center;">{{data[0].hastalik_adi}} Hastalığı Olan Çalışanların Listesi</h3>
<table class="w3-table-all">
    <thead>
      <tr class="w3-red">
        <th scope="col">Eleman Tc</th>
        <th scope="col">Eleman İsim</th>
        <th scope="col">Eleman Soyisim</th>
      </tr>
    </thead>
    <tbody>
    
     {% for d0 in data0 %} 
      <tr>
        <th scope="row">{{d0.tc}}</th>
        <td>{{d0.isim}}</td>
        <td>{{d0.soyad}}</td>
      </tr>
      {% endfor %}
      </tbody> 
</table><br>






<h3 style= "text-align: center;">{{data[1].hastalik_adi}} Hastalığı Olan Çalışanların Listesi</h3>
<table class="w3-table-all">
    <thead>
      <tr class="w3-red"> 
        <th scope="col">Eleman Tc</th>
        <th scope="col">Eleman İsim</th>
        <th scope="col">Eleman Soyisim</th>
      </tr>
    </thead>
    <tbody>
    
     {% for d1 in data1 %} 
      <tr>
        <th scope="row">{{d1.tc}}</th>
        <td>{{d1.isim}}</td>
        <td>{{d1.soyad}}</td>
      </tr>
      {% endfor %}
      </tbody> 
</table><br>





<h3 style= "text-align: center;">{{data[2].hastalik_adi}} Hastalığı Olan Çalışanların Listesi</h3>
<table class="w3-table-all">
    <thead>
      <tr class="w3-red">
        <th scope="col">Eleman Tc</th>
        <th scope="col">Eleman İsim</th>
        <th scope="col">Eleman Soyisim</th>
      </tr>
    </thead>
    <tbody>
    
     {% for d2 in data2 %} 
      <tr>
        <th scope="row">{{d2.tc}}</th>
        <td>{{d2.isim}}</td>
        <td>{{d2.soyad}}</td>
      </tr>
      {% endfor %}
      </tbody> 
</table><br>


</div>
  </form>

{% else %}
<div class = "alert alert-danger">Henüz bilgi bulunmuyor...</div>
{% endif %}



<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawStuff);

      function drawStuff() {
        var data = new google.visualization.arrayToDataTable([
          ['Hastalık Adı', 'Kişi Sayısı'],
          ['{{data[0].hastalik_adi}}', {{bir}}],
          ['{{data[1].hastalik_adi}}', {{iki}}],
          ['{{data[2].hastalik_adi}}', {{uc}}]
        ]);

        var options = {
          width: 500,
          legend: { position: 'none' },
          chart: {
            title: '',
            subtitle: '' },
          axes: {
            x: {
              0: { side: 'top'} // Top x-axis.
            }
          },
          bar: { groupWidth: "35%" }
        };

        var chart = new google.charts.Bar(document.getElementById('top_x_div'));
        // Convert the Classic options to Material options.
        chart.draw(data, google.charts.Bar.convertOptions(options));
      };
    </script>
 
    <div id="top_x_div" style="width: 400px; height: 500px;"></div>








{% endblock body %}